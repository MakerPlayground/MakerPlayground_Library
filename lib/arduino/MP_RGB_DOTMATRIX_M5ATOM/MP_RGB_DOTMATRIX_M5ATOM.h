#ifndef MP_RGB_DOTMATRIX_M5ATOM_H
#define MP_RGB_DOTMATRIX_M5ATOM_H

#include "MP_DEVICE.h"
#include <M5Atom.h>

const char font[][5] = {{ 0x0E, 0x11, 0x1F, 0x11, 0x11 } // A
                      , { 0x1E, 0x11, 0x1E, 0x11, 0x1E }
                      , { 0x0F, 0x10, 0x10, 0x10, 0x0F }
                      , { 0x1E, 0x11, 0x11, 0x11, 0x1E }
                      , { 0x1F, 0x10, 0x1F, 0x10, 0x1F }
                      , { 0x1F, 0x10, 0x1E, 0x10, 0x10 }
                      , { 0x0F, 0x10, 0x17, 0x11, 0x0F }
                      , { 0x11, 0x11, 0x1F, 0x11, 0x11 }
                      , { 0x0E, 0x04, 0x04, 0x04, 0x0E }
                      , { 0x07, 0x01, 0x01, 0x11, 0x0E }

                      , { 0x12, 0x14, 0x1E, 0x11, 0x11 } // K
                      , { 0x08, 0x08, 0x08, 0x08, 0x0E }
                      , { 0x11, 0x1B, 0x15, 0x11, 0x11 }
                      , { 0x19, 0x15, 0x15, 0x15, 0x13 }
                      , { 0x0E, 0x11, 0x11, 0x11, 0x0E }
                      , { 0x1E, 0x11, 0x1E, 0x10, 0x10 }
                      , { 0x0C, 0x12, 0x12, 0x12, 0x0F }
                      , { 0x1E, 0x11, 0x1E, 0x12, 0x11 }
                      , { 0x0F, 0x10, 0x0E, 0x01, 0x1E }
                      , { 0x1F, 0x04, 0x04, 0x04, 0x04 }

                      , { 0x11, 0x11, 0x11, 0x11, 0x0E } // U
                      , { 0x11, 0x11, 0x0A, 0x0A, 0x04 }
                      , { 0x11, 0x11, 0x15, 0x1B, 0x11 }
                      , { 0x11, 0x0A, 0x04, 0x0A, 0x11 }
                      , { 0x11, 0x11, 0x0E, 0x04, 0x04 }
                      , { 0x1F, 0x01, 0x0E, 0x10, 0x1F }};

class MP_RGB_DOTMATRIX_M5ATOM
{
public:
	MP_RGB_DOTMATRIX_M5ATOM(uint8_t pin);
	int init();
	void update(unsigned long current_time);
	void printStatus();
	
    void showBitmap(const char* data);
    void showText(const char* text, uint8_t text_size, int rotation, double red, double green, double blue);
	void clear();

private:
    unsigned char* data;
};

#endif
